!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a){var b=a("./frontpage"),c=new b;c.init()},{"./frontpage":2}],2:[function(a,b){var c=a("calendarth"),d=a("./util"),e=b.exports=function(){this.$agendaContainer=null,this.$agendaItem=null,this.$error=null};e.prototype.init=function(){this.$agendaContainer=$("#agenda-items"),this.$agendaItem=$("#agenda-tpl"),this.$error=$("#agenda-error"),this.calendarth=c({apiKey:"AIzaSyC75rnKyEkGxmVyG7hlqFicwPBgDmQLN_w",calendarId:"2ul10sd9g30mnk1vpmcnnp5qv4@group.calendar.google.com",maxResults:12}),this.calendarth.fetch(this._handleCalResult.bind(this)),this._fixPanels()},e.prototype._fixPanels=function(){var a=0;$(".panel-info").each(function(){var b=$(this).height();console.log("each:",b),b>a&&(a=b)}),$(".panel-info").height(a)},e.prototype._handleCalResult=function(a,b){if(this.$agendaContainer.empty(),a)return void this.$agendaContainer.append(this.$error.clone().removeClass("hide"));var c=[],d=0,e='<div class="row">';b.items.forEach(function(a){c.indexOf(a.summary)>-1||(c.push(a.summary),d&&d%2===0&&(e+='</div><div class="row">'),e+=this._assignValues(this.$agendaItem.clone(),a),d++)},this),e+="</div>",this.$agendaContainer.append(e)},e.prototype._assignValues=function(a,b){a.removeClass("hide"),a.find(".panel-title").text(b.summary);var c=this._parseDesc(b.description);a.find(".agenda-tpl-when span").text(d.formatDate(b.start,b.end));var e="";if(c.mapUrl?(e='<a href="'+c.mapUrl+'" target="_blank">',e+=b.location,e+="</a>"):e=b.location,a.find(".agenda-tpl-address span").html(e),c.venue?a.find(".agenda-tpl-venue span").text(c.venue):a.find(".agenda-tpl-venue").addClass("hide"),c.infoUrl){var f="";f=c.infoUrl.length>25?c.infoUrl.substr(0,25)+"...":c.infoUrl,a.find(".agenda-tpl-info a").attr("href",c.infoUrl).text(f)}else a.find(".agenda-tpl-info").addClass("hide");c.about?a.find(".agenda-tpl-about span").html(c.about):a.find(".agenda-tpl-about").addClass("hide");var g=this.calendarth.getEventUrl(b);return a.find(".addcal").attr("href",g),a.find(".viewcal").attr("href",b.htmlLink),a.html()},e.prototype._parseDesc=function(a){var b={venue:null,infoUrl:null,mapUrl:null,about:null,rest:""};if(!a)return b;var c=a.split("\n");return c.forEach(function(a){if(a.length){var c=a.indexOf(":");if(-1!==c){var d=a.substr(0,c).toLowerCase().trim(),e=a.substr(c+1).trim();switch(d){case"venue":b.venue=e;break;case"info":b.infoUrl=e;break;case"map":b.mapUrl=e;break;case"about":b.about=e;break;default:b.rest+=a+"<br />"}}}},this),b}},{"./util":3,calendarth:5}],3:[function(a,b){var c=b.exports={};c.nl2br=function(a){return"string"!=typeof a?"":a.split("\n").join("<br />")},c.formatDate=function(a,b){var d,e,f=!1;a.dateTime?(d=new Date(a.dateTime),e=new Date(b.dateTime)):(f=!0,d=new Date(a.date),e=new Date(b.date),e-=11e6,e=new Date(e));var g=["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sub"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=g[d.getDay()];return i+=", "+h[d.getMonth()],i+=" "+d.getDate(),f?i+=d.getDate()===e.getDate()&&d.getMonth()===e.getMonth()?", All day event":" - "+g[e.getDay()]+" "+e.getDate():(i+=" | "+d.getHours()+":"+c.twoDigit(d.getMinutes()),i+=" - "+e.getHours()+":"+c.twoDigit(e.getMinutes())),i},c.twoDigit=function(a){var b=a+"";return 1===b.length?"0"+b:b}},{}],4:[function(a,b){var c=a("./item"),d=b.exports=function(a){this.options=a||{},this.apiKey=this.options.apiKey||null,this.calendarId=this.options.calendarId||null,this.maxResults=this.options.maxResults||20};d.prototype.fetch=function(a){var b="https://www.googleapis.com/calendar/v3/calendars/";b+=this.calendarId+"/events?key=",b+=this.apiKey;var d=new Date;b+="&orderBy=startTime",b+="&singleEvents=true",b+="&timeMin="+d.toISOString(),b+="&maxResults="+this.maxResults,$.ajax({type:"GET",url:b,crossDomain:!0,dataType:"json"}).done(function(b){var d=new c(b);a(null,d)}).fail(function(b,c,d){a(d)})},d.prototype.getEventUrl=function(a){var b=a.htmlLink.split("="),c="http://www.google.com/calendar/event?action=TEMPLATE&tmeid=";return c+=b[1],c+="&tmsrc=",c+=encodeURIComponent(a.organizer.email)}},{"./item":6}],5:[function(a,b){var c=a("./calendarth");b.exports=function(a){return new c(a)}},{"./calendarth":4}],6:[function(a,b){var c=b.exports=function(a){return a};c.prototype.get=function(a){return a?this.calendarObj[a]:this.calendarObj}},{}]},{},[1]);